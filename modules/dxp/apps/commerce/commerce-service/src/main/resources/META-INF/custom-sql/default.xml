<?xml version="1.0"?>

<custom-sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceCartItemFinder.getCPInstanceQuantity">
		<![CDATA[
			SELECT
				SUM(CommerceCartItem.quantity) AS SUM_VALUE
			FROM
				CommerceCartItem
			WHERE
				(CommerceCartItem.CPInstanceId = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceCountryFinder.findByCommerceWarehouses">
		<![CDATA[
			SELECT
				{CommerceCountry.*}
			FROM
				CommerceCountry
			WHERE
				(CommerceCountry.commerceCountryId IN (
					SELECT
						commerceCountryId
					FROM
						CommerceWarehouse
					WHERE
						(CommerceWarehouse.groupId = ?)
				))
			ORDER BY
				CommerceCountry.priority
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceOrderItemFinder.findByG_C">
		<![CDATA[
			SELECT
				{CommerceOrderItem.*}
			FROM
				CommerceOrderItem
			INNER JOIN
				CommerceOrder ON
					(CommerceOrder.commerceOrderId = CommerceOrderItem.commerceOrderId)
			WHERE
				(CommerceOrderItem.groupId = ?) AND
				(CommerceOrder.shippingAddressId = ?) AND
				(CommerceOrderItem.quantity > CommerceOrderItem.shippedQuantity)
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommercePriceListFinder.findByExpirationDate">
		<![CDATA[
			SELECT
				CommercePriceList.*
			FROM
				CommercePriceList
			WHERE
				(CommercePriceList.expirationDate < ?)  AND
				(CommercePriceList.expirationDate is not null) AND
				([$OWNER_USER_ID$] [$OWNER_USER_ID_AND_OR_CONNECTOR$] ([$STATUS$]))
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceWarehouseFinder.countByG_N_D_S_C_Z_C">
		<![CDATA[
			SELECT
				COUNT(DISTINCT commerceWarehouseId) AS COUNT_VALUE
			FROM
				CommerceWarehouse
			WHERE
				(CommerceWarehouse.groupId = ?) AND
				(
					(lower(CommerceWarehouse.name) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(CommerceWarehouse.description LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(
						(lower(CommerceWarehouse.street1) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(lower(CommerceWarehouse.street2) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(lower(CommerceWarehouse.street3) LIKE ? [$AND_OR_NULL_CHECK$])
					) [$AND_OR_CONNECTOR$]
					(lower(CommerceWarehouse.city) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(lower(CommerceWarehouse.zip) LIKE ? [$AND_OR_NULL_CHECK$])
				)
				AND (CommerceWarehouse.commerceCountryId = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceWarehouseFinder.findByCommerceWarehouseItemQuantity">
		<![CDATA[
			SELECT
				{CommerceWarehouse.*}
			FROM
				CommerceWarehouse
			WHERE
				(CommerceWarehouse.commerceWarehouseId IN (
					SELECT
						commerceWarehouseId
					FROM
						CommerceWarehouseItem
					WHERE
						(CommerceWarehouseItem.classNameId = ?) AND
						(CommerceWarehouseItem.classPK = ?) AND
						(CommerceWarehouseItem.quantity >= ?)
				))
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceWarehouseFinder.findByG_N_D_S_C_Z_C">
		<![CDATA[
			SELECT
				{CommerceWarehouse.*}
			FROM
				CommerceWarehouse
			WHERE
				(CommerceWarehouse.groupId = ?) AND
				(
					(lower(CommerceWarehouse.name) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(CommerceWarehouse.description LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(
						(lower(CommerceWarehouse.street1) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(lower(CommerceWarehouse.street2) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(lower(CommerceWarehouse.street3) LIKE ? [$AND_OR_NULL_CHECK$])
					) [$AND_OR_CONNECTOR$]
					(lower(CommerceWarehouse.city) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(lower(CommerceWarehouse.zip) LIKE ? [$AND_OR_NULL_CHECK$])
				)
				AND (CommerceWarehouse.commerceCountryId = ?)
			ORDER BY
				CommerceWarehouse.name ASC
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceWarehouseItemFinder.findByCPInstanceId">
		<![CDATA[
			SELECT
				{CommerceWarehouseItem.*}
			FROM
				CommerceWarehouseItem
			INNER JOIN
				CommerceWarehouse ON
					(CommerceWarehouseItem.commerceWarehouseId = CommerceWarehouse.commerceWarehouseId)
			WHERE
				(CommerceWarehouseItem.CPInstanceId = ?)
			ORDER BY
				CommerceWarehouseItem.quantity
		]]>
	</sql>
	<sql id="com.liferay.commerce.service.persistence.CommerceWarehouseItemFinder.getCPInstanceQuantity">
		<![CDATA[
			SELECT
				SUM(CommerceWarehouseItem.quantity) AS SUM_VALUE
			FROM
				CommerceWarehouseItem
			WHERE
				(CommerceWarehouseItem.CPInstanceId = ?)
		]]>
	</sql>
</custom-sql>