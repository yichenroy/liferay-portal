task prepareWeDeployModules(type: Sync)
task wedeploy(type: Exec)

configurations {
	weDeployModules
}

dependencies {
	weDeployModules subprojects.findAll {
		File lfrbuildPortalFile = it.file(".lfrbuild-portal")

		lfrbuildPortalFile.exists()
	}
}

prepareWeDeployModules {
	from configurations.weDeployModules
	into "wedeploy/lfr/deploy"
}

wedeploy {
	args "deploy"
	args "--project", project.properties["roject"]

	dependsOn prepareWeDeployModules
	description = "Deploys Liferay Commerce to WeDeploy."
	executable = "we"
	group = "upload"
	workingDir = "wedeploy"
}